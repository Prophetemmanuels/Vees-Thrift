<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Vees Thrift</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- PWA Manifest -->
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#f6c1d9">

<!-- Apple PWA support -->
<link rel="apple-touch-icon" href="images/icon-192.png">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="default">

<style>
:root{--pink:#f6c1d9;--gold:#d4af37;}
body{margin:0;font-family:Segoe UI,sans-serif;background:linear-gradient(to bottom,var(--pink),white);}
header{display:flex;justify-content:space-between;align-items:center;padding:10px;background:white;box-shadow:0 2px 6px rgba(0,0,0,.1);}
header img{width:50px;height:50px;border-radius:50%;border:2px solid var(--gold);}
.products{display:grid;grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:15px;padding:15px;}
.product{background:white;border-radius:15px;padding:10px;box-shadow:0 2px 6px rgba(0,0,0,.1);text-align:center;cursor:pointer;opacity:0;transform:translateY(40px) scale(0.95);transition:all .4s ease;}
.product.show{opacity:1;transform:translateY(0) scale(1);}
.product:hover{transform:translateY(-5px) scale(1.05);box-shadow:0 6px 20px rgba(0,0,0,.25);}
.product.selected{outline:3px solid var(--gold);}
.product img{width:100%;border-radius:10px;}
.badge{background:var(--gold);color:white;padding:3px 8px;border-radius:12px;font-size:12px;}
.price{color:var(--gold);font-weight:bold;}
.cart-bar{position:fixed;bottom:0;width:100%;background:white;padding:10px;box-shadow:0 -2px 6px rgba(0,0,0,.1);display:flex;justify-content:space-between;align-items:center;z-index:40;}
.cart-bar button{margin-left:5px;padding:8px 14px;border:none;border-radius:20px;background:var(--pink);cursor:pointer;}
.cart-modal{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:white;z-index:50;padding:15px;overflow:auto;}
.cart-item{border-bottom:1px solid #ddd;padding:10px 0;display:flex;justify-content:space-between;}
.modal{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.6);z-index:50;overflow:auto;padding:20px;}
.modal-content{background:white;border-radius:20px;padding:20px;max-width:500px;margin:40px auto;}
.modal-content img{width:100%;max-height:400px;object-fit:cover;border-radius:15px;}
.modal-content button{width:100%;padding:12px;margin-top:10px;background:var(--pink);border:none;border-radius:25px;font-size:16px;cursor:pointer;}
.whatsapp,.whatsapp-group,.other-services{position:fixed;right:15px;color:white;padding:15px;border-radius:50%;text-decoration:none;font-size:22px;z-index:50;}
.whatsapp{bottom:80px;background:#25D366;}
.whatsapp-group{bottom:150px;background:#128C7E;}
.other-services{bottom:220px;background:#FF69B4;}
</style>
</head>
<body>

<header>
 <div style="display:flex; align-items:center;">
  <img src="images/logo.png">
  <h2>Vees Thrift</h2>
 </div>
 <div id="datetime"></div>
</header>

<div class="products" id="products"></div>

<div class="cart-bar">
  <span>Total: ZMW <b id="total">0</b></span>
  <div>
    <button onclick="openCart()">View Cart</button>
    <button onclick="contactWhatsApp()">Reserve</button>
  </div>
</div>

<div class="cart-modal" id="cartModal">
  <button onclick="closeCart()">â¬… Back</button>
  <h3>Your Cart</h3>
  <div id="cartItems"></div>
</div>

<!-- Floating Buttons -->
<a class="whatsapp" href="https://wa.me/260971415665" target="_blank">ðŸ’¬</a>
<a class="whatsapp-group" href="https://chat.whatsapp.com/LIZLsg7FucSCfNq1HH02pF" target="_blank">ðŸ‘¥</a>
<a class="other-services" href="#" onclick="showServices()">ðŸ’¼</a>

<!-- Other Services Modal -->
<div class="modal" id="servicesModal">
  <div class="modal-content">
    <button onclick="closeServices()">â¬… Back</button>
    <h3>Other Services We Provide</h3>
    <button onclick="window.open('https://www.facebook.com/GHOPzambia/','_blank')">Ghop Photography ðŸ“¸</button>
    <button onclick="window.open('https://www.facebook.com/GhopBeautyMakeover/','_blank')">GhopBeauty Makeup ðŸ’„</button>
  </div>
</div>

<!-- Product Modal -->
<div class="modal" id="modal">
  <div class="modal-content">
    <button onclick="closeModal()">â¬… Back</button>
    <img id="modalImg">
    <h3 id="modalTitle"></h3>
    <p id="modalPrice"></p>
    <button onclick="addToCart()">Add to Cart</button>
  </div>
</div>

<script>
// CART AND PRODUCTS
let cart = [], total = 0, current = {};
const prices = {
  "p (1).jpeg": 135,
  "p (2).jpeg": 45,
  "p (3).jpeg": 45,
  "p (4).jpeg": 55,
  "p (5).jpeg": 50,
  "p (6).jpeg": 45,
  "p (7).jpeg": 55,
  "p (8).jpeg": 45,
  "p (9).jpeg": 55,
  "p (10).jpeg": 135
};
const defaultPrice = 50;

function generateProducts() {
  const container = document.getElementById("products");
  const maxImages = 200;
  for (let i = 1; i <= maxImages; i++) {
    const filename = `p (${i}).jpeg`;
    const price = prices[filename] || defaultPrice;
    const imgPath = `images/${filename}`;
    const product = document.createElement("div");
    product.className = "product";
    product.innerHTML = `
      <img src="${imgPath}" onerror="this.style.display='none'">
      <div class="badge">Product #${i}</div>
      <p class="price">ZMW ${price}</p>
    `;
    product.onclick = () => {
      current = { number: i, price, filename };
      document.getElementById("modal").style.display = "block";
      document.getElementById("modalImg").src = imgPath;
      document.getElementById("modalTitle").innerText = `Product #${i}`;
      document.getElementById("modalPrice").innerText = `ZMW ${price}`;
      document.querySelectorAll(".product").forEach(p => p.classList.remove("selected"));
      product.classList.add("selected");
    };
    container.appendChild(product);
  }

  const observer = new IntersectionObserver(entries => {
    entries.forEach(entry => { if (entry.isIntersecting) entry.target.classList.add("show"); });
  }, { threshold: 0.2 });
  document.querySelectorAll(".product").forEach(p => observer.observe(p));
}

generateProducts();

// CART FUNCTIONS
function addToCart(){cart.push(current);total+=current.price;document.getElementById("total").innerText=total;closeModal();}
function openCart(){document.getElementById("cartModal").style.display="block";renderCart();}
function closeCart(){document.getElementById("cartModal").style.display="none";}
function renderCart(){
  const c=document.getElementById("cartItems");c.innerHTML='';
  if(cart.length===0){c.innerHTML="<p>Cart is empty.</p>";return;}
  cart.forEach((item,index)=>{c.innerHTML+=`<div class="cart-item">Product #${item.number} - ZMW ${item.price} <button onclick="removeItem(${index})">Remove</button></div>`;});
}
function removeItem(index){total-=cart[index].price;cart.splice(index,1);document.getElementById("total").innerText=total;renderCart();}

// WHATSAPP RESERVATION
function contactWhatsApp(){
  if(cart.length===0){alert("Add item(s) to cart first."); return;}
  let msg="Hello ðŸ‘‹, I would like to reserve these products:\n\n";
  cart.forEach((item,index)=>{msg+=`${index+1}. Product #${item.number}\n`;});
  msg+=`\nTotal: ZMW ${total}\nPlease advise sizes.`;
  window.open(`https://wa.me/260971415665?text=${encodeURIComponent(msg)}`);
}

// OTHER SERVICES
function showServices(){ document.getElementById('servicesModal').style.display='block'; }
function closeServices(){ document.getElementById('servicesModal').style.display='none'; }

// MODAL CLOSE
function closeModal(){document.getElementById('modal').style.display='none';}

// LIVE TIME
function updateTime(){let now=new Date();document.getElementById("datetime").innerText=now.toLocaleDateString()+" | "+now.toLocaleTimeString();}
setInterval(updateTime,1000);updateTime();

// SERVICE WORKER (INSTALLABLE PWA)
if('serviceWorker' in navigator){navigator.serviceWorker.register('service-worker.js');}
</script>
</body>
</html>
