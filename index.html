<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Vees Thrift</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="manifest" href="manifest.json">

<style>
body{margin:0;font-family:Arial;background:#fff}
header{
  background:#f7c6d0;
  display:flex;
  align-items:center;
  padding:10px;
}
header img{
  width:45px;height:45px;border-radius:50%;margin-right:10px
}
header h2{margin:0;color:#5a1a2e}

.search{padding:10px}
.search input{width:100%;padding:10px}

.products{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(150px,1fr));
  gap:10px;
  padding:10px;
}
.product{
  background:#fff;
  border-radius:10px;
  box-shadow:0 0 5px rgba(0,0,0,.1);
  padding:8px;
  text-align:center;
}
.product img{width:100%;border-radius:8px}
.product button{background:#d6336c;color:#fff;border:none;padding:8px;width:100%}

.cart{
  padding:10px;background:#fce4ec
}
.cart-item{
  display:flex;justify-content:space-between;margin-bottom:5px
}
.cart-item button{background:red;color:#fff;border:none}

.fixed-pay{
  position:fixed;bottom:0;width:100%;
  background:#d6336c;color:#fff;
  padding:15px;font-size:18px;border:none
}

/* CUSTOMER INFO */
#customerBox{
  position:fixed;bottom:0;left:0;right:0;
  max-height:90vh;
  background:#fff;
  display:none;
  overflow-y:auto;
  padding:15px;
  border-radius:20px 20px 0 0;
}
#customerBox input{width:100%;padding:10px;margin-bottom:10px}

.btn{width:100%;padding:12px;border:none;margin-bottom:10px}
.whatsapp{background:#25D366;color:#fff}
.pay{background:#2f9e44;color:#fff}
.close{background:#999;color:#fff}
.copy{background:#ffd43b}
</style>
</head>

<body>

<header>
<img src="images/logo.png">
<h2>Vees Thrift</h2>
</header>

<div class="search">
<input placeholder="Search products..." onkeyup="search(this.value)">
</div>

<div class="products" id="products"></div>

<div class="cart">
<h3>Cart</h3>
<div id="cartItems"></div>
<b>Total: K<span id="total">0</span></b>
</div>

<button class="fixed-pay" onclick="openCustomer()">Finish & Pay</button>

<!-- CUSTOMER INFO -->
<div id="customerBox">
<h3>Customer Information</h3>

<input id="cname" placeholder="Full Name">
<input id="cphone" placeholder="WhatsApp Number">
<input id="cemail" placeholder="Email (optional)">
<input id="caddress" placeholder="Delivery Address">

<button class="btn whatsapp" onclick="sendOrder()">Send Order to WhatsApp</button>

<button class="btn copy" onclick="copyPay()">Copy Payment Details</button>

<button class="btn pay" onclick="pay()">Make Transaction (*115#)</button>

<button class="btn close" onclick="closeCustomer()">Close</button>
</div>

<script>
const products=[
 {name:"Red Dress",price:250,img:"images/product1.jpg"},
 {name:"Blue Dress",price:300,img:"images/product2.jpg"},
 {name:"Heels",price:180,img:"images/product3.jpg"},
 {name:"Bag",price:200,img:"images/product4.jpg"}
];

let cart=[];

function renderProducts(list=products){
 document.getElementById("products").innerHTML="";
 list.forEach(p=>{
  productsDiv.innerHTML+=`
   <div class="product">
    <img src="${p.img}">
    <p>${p.name}</p>
    <b>K${p.price}</b>
    <button onclick="add('${p.name}',${p.price})">Add to Cart</button>
   </div>`;
 });
}
const productsDiv=document.getElementById("products");
renderProducts();

function add(name,price){
 cart.push({name,price});
 renderCart();
}

function remove(i){
 cart.splice(i,1);renderCart();
}

function renderCart(){
 let html="";let t=0;
 cart.forEach((c,i)=>{
  t+=c.price;
  html+=`<div class="cart-item">${c.name} K${c.price}
  <button onclick="remove(${i})">X</button></div>`;
 });
 document.getElementById("cartItems").innerHTML=html;
 document.getElementById("total").innerText=t;
}

function openCustomer(){document.getElementById("customerBox").style.display="block"}
function closeCustomer(){document.getElementById("customerBox").style.display="none"}

function sendOrder(){
 let msg=`Vees Thrift Order%0A
 Name:${cname.value}%0A
 Phone:${cphone.value}%0A
 Address:${caddress.value}%0A
 Date:${new Date().toLocaleString()}%0A
 Items:%0A`;

 cart.forEach(c=>msg+=`${c.name} K${c.price}%0A`);
 msg+=`Total: K${document.getElementById("total").innerText}`;

 window.open(`https://wa.me/260971415665?text=${msg}`);
}

function pay(){
 alert("Pay to:\n0971415665 (Vivien Lungu)\nOR\nAgent 20202857 (Emmanuel Sakala)");
 location.href="tel:*115#";
}

function copyPay(){
 navigator.clipboard.writeText(
 "0971415665 - Vivien Lungu\nAgent: 20202857 Emmanuel Sakala"
 );
 alert("Payment details copied");
}

function search(v){
 renderProducts(products.filter(p=>p.name.toLowerCase().includes(v.toLowerCase())));
}

if('serviceWorker'in navigator){
 navigator.serviceWorker.register("service-worker.js");
}
</script>

</body>
</html>
